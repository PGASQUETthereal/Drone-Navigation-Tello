from djitellopy import TelloSwarm
import time

# Définition des IP des drones
swarm = TelloSwarm.fromIps([
    "192.168.137.115",  # Drone 1
    "192.168.137.132"  # Drone 2
])

swarm.connect()
swarm.get_battery()
swarm.takeoff()

time(1)


# Faire un carré dans un sens pour Drone 1 et dans l'autre pour Drone 2
def TurnAround(i, tello):
    for _ in range(4):  # 4 côtés du carré
        if i == 0:  # Drone 1 tourne à droite
            tello.send_rc_control(2, 2, 0, 0)
        else:  # Drone 2 tourne à gauche
            tello.send_rc_control(2, -2, 0, 0)


swarm.parallel(TurnAround)

swarm.land()

# Affichage du niveau de batterie
for i, tello in enumerate(swarm.tellos):
    print(f"Drone {i+1} Battery: {tello.get_battery()}%")

swarm.end()
